<!DOCTYPE html>
<html>
  <head>
    <title>Ismail Helali</title>
  </head>
  <body>
    <h1>Text Extraction from Image</h1>

    <!-- This is the form that allows the user to select an image file -->
    <form id="image-form">
      <label for="image-file">Select an image file:</label><br>
      <input type="file" id="image-file"><br>
      <button type="submit">Extract Text</button>
    </form>

    <!-- This is the div that will display the feedback messages -->
    <div id="feedback-div"></div>

    <!-- This is the div that will display the extracted text -->
    <div id="text-div"></div>

    <!-- Load the Tesseract.js library -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@v3.0.2"></script>

    <!-- This is the JavaScript that handles the image processing and text extraction -->
    <script>
      // Get references to the form and div elements
      const imageForm = document.getElementById('image-form');
      const feedbackDiv = document.getElementById('feedback-div');
      const textDiv = document.getElementById('text-div');

      // Add a submit event listener to the form
      imageForm.addEventListener('submit', event => {
        // Prevent the form from being submitted
        event.preventDefault();

        // Get the selected image file
        const imageFile = document.getElementById('image-file').files[0];

        // Ensure that an image file was selected
        if (!imageFile) {
          feedbackDiv.innerText = 'No image file selected';
          return;
        }

        // Set the text of the feedback div to "Extracting text..."
        feedbackDiv.innerText = 'Extracting text...';

        // Use Tesseract.js to extract text from the image
        Tesseract.recognize(imageFile, {
          // Set the language of the text to be recognized
          lang: 'eng+fra+ara',
          // Set Tesseract.js to use the Tesseract OCR engine, which is more accurate but slower than the LSTM engine
          engine: Tesseract.OcrEngine.TESSERACT_OCR
        })
          .then(result => {
            // Set the text of the feedback div to "Text extracted successfully"
            feedbackDiv.innerText = 'Text extracted successfully';
            // Set the text of the text div to the extracted text
            textDiv.innerText = result.text;
          })
          .catch(error => {
            console.error(error);
            // Set the text of the feedback div to "There was an error extracting text from the image"
            feedbackDiv.innerText = 'There was an error extracting text from the image';
          });
      });
    </script>
  </body>
</html>
